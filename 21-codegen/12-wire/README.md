# Пример Wire DI с генерацией кода

Этот пример демонстрирует Google Wire - инструмент генерации кода для внедрения зависимостей в Go.

## Что такое Wire?

Wire - это инструмент, который автоматически генерирует шаблонный код для подключения зависимостей вашего приложения. Вместо ручного создания конструкторов и управления зависимостями, Wire читает ваш код и генерирует код внедрения зависимостей.

## Структура проекта

- `logger.go` - интерфейс Logger и PrinterService (зависит от Logger)
- `database.go` - Database и UserRepository (зависит от Database)
- `service.go` - UserService (зависит от Repository, Printer и Logger)
- `wire.go` - определение инжектора Wire
- `main.go` - точка входа приложения

## Граф зависимостей

```
Logger (корень)
├── PrinterService (зависит от Logger)
├── Database (зависит от Logger)
│   └── UserRepository (зависит от Database)
└── UserService (зависит от Repository, Printer, Logger)
```

## Как запустить

### Установка Wire
```bash
go install github.com/google/wire/cmd/wire@latest
```

### Генерация зависимостей
```bash
wire ./...
```

Это генерирует `wire_gen.go` с фактической реализацией `InitializeApp()`.

### Запуск приложения
```bash
go run .
```

## Что делает Wire

1. Анализирует функцию `InitializeApp()` в `wire.go`
2. Отслеживает цепь зависимостей на основе сигнатур функций-конструкторов
3. Автоматически генерирует `wire_gen.go` с:
   - Всеми необходимыми конструкторами
   - Правильным порядком инициализации
   - Типобезопасной передачей зависимостей

## Файлы, сгенерированные Wire

- `wire_gen.go` - сгенерированный код внедрения зависимостей

## Ключевые преимущества

- **Типобезопасность**: Проверка зависимостей на этапе компиляции
- **Нулевые накладные расходы во время выполнения**: Вся подготовка происходит во время генерации кода
- **Сокращение шаблонного кода**: Отсутствие необходимости в ручном управлении зависимостями
- **Четкий граф зависимостей**: Легко видеть связи в `wire.go`
